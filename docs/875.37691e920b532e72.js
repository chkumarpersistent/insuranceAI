"use strict";(self.webpackChunkinsuranceAI=self.webpackChunkinsuranceAI||[]).push([[875],{2875:(V,b,v)=>{v.d(b,{$D:()=>le});var a=v(5861),l=function(e){return e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.OTHER="OTHER",e}(l||{});class f extends Error{constructor(n){super(`[GoogleGenerativeAI Error]: ${n}`)}}class E extends f{constructor(n,t){super(n),this.response=t}}const x="0.2.1",W="genai-js";var C=function(e){return e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents",e}(C||{});class I{constructor(n,t,s,r){this.model=n,this.task=t,this.apiKey=s,this.stream=r}toString(){let n=`https://generativelanguage.googleapis.com/v1/${this.model}:${this.task}`;return this.stream&&(n+="?alt=sse"),n}}function y(e,n,t){return L.apply(this,arguments)}function L(){return(L=(0,a.Z)(function*(e,n,t){let s;try{if(s=yield fetch(e.toString(),Object.assign(Object.assign({},function Q(e){const n={};if(e?.timeout>=0){const t=new AbortController,s=t.signal;setTimeout(()=>t.abort(),e.timeout),n.signal=s}return n}(t)),{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-client":`${W}/${x}`,"x-goog-api-key":e.apiKey},body:n})),!s.ok){let r="";try{const o=yield s.json();r=o.error.message,o.error.details&&(r+=` ${JSON.stringify(o.error.details)}`)}catch{}throw new Error(`[${s.status} ${s.statusText}] ${r}`)}}catch(r){const o=new f(`Error fetching from ${e.toString()}: ${r.message}`);throw o.stack=r.stack,o}return s})).apply(this,arguments)}function G(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),$(e.candidates[0]))throw new E(`${M(e)}`,e);return function z(e){var n,t,s,r;return null!==(r=null===(s=null===(t=null===(n=e.candidates)||void 0===n?void 0:n[0].content)||void 0===t?void 0:t.parts)||void 0===s?void 0:s[0])&&void 0!==r&&r.text?e.candidates[0].content.parts[0].text:""}(e)}if(e.promptFeedback)throw new E(`Text not available. ${M(e)}`,e);return""},e}const ee=[l.RECITATION,l.SAFETY];function $(e){return!!e.finishReason&&ee.includes(e.finishReason)}function M(e){var n,t,s;let r="";if(e.candidates&&0!==e.candidates.length||!e.promptFeedback){if(null!==(s=e.candidates)&&void 0!==s&&s[0]){const o=e.candidates[0];$(o)&&(r+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(r+=`: ${o.finishMessage}`))}}else r+="Response was blocked",!(null===(n=e.promptFeedback)||void 0===n)&&n.blockReason&&(r+=` due to ${e.promptFeedback.blockReason}`),null!==(t=e.promptFeedback)&&void 0!==t&&t.blockReasonMessage&&(r+=`: ${e.promptFeedback.blockReasonMessage}`);return r}function T(e){return this instanceof T?(this.v=e,this):new T(e)}"function"==typeof SuppressedError&&SuppressedError;const k=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function se(e){return P.apply(this,arguments)}function P(){return(P=(0,a.Z)(function*(e){const n=[],t=e.getReader();for(;;){const{done:s,value:r}=yield t.read();if(s)return G(ie(n));n.push(r)}})).apply(this,arguments)}function re(e){return function te(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,s=t.apply(e,n||[]),o=[];return r={},u("next"),u("throw"),u("return"),r[Symbol.asyncIterator]=function(){return this},r;function u(c){s[c]&&(r[c]=function(O){return new Promise(function(B,Ee){o.push([c,O,B,Ee])>1||d(c,O)})})}function d(c,O){try{!function i(c){c.value instanceof T?Promise.resolve(c.value.v).then(_,p):J(o[0][2],c)}(s[c](O))}catch(B){J(o[0][3],B)}}function _(c){d("next",c)}function p(c){d("throw",c)}function J(c,O){c(O),o.shift(),o.length&&d(o[0][0],o[0][1])}}(this,arguments,function*(){const t=e.getReader();for(;;){const{value:s,done:r}=yield T(t.read());if(r)break;yield yield T(G(s))}})}function ie(e){const n=e[e.length-1],t={promptFeedback:n?.promptFeedback};for(const s of e)if(s.candidates)for(const r of s.candidates){const o=r.index;if(t.candidates||(t.candidates=[]),t.candidates[o]||(t.candidates[o]={index:r.index}),t.candidates[o].citationMetadata=r.citationMetadata,t.candidates[o].finishReason=r.finishReason,t.candidates[o].finishMessage=r.finishMessage,t.candidates[o].safetyRatings=r.safetyRatings,r.content&&r.content.parts){t.candidates[o].content||(t.candidates[o].content={role:r.content.role||"user",parts:[{text:""}]});for(const u of r.content.parts)u.text&&(t.candidates[o].content.parts[0].text+=u.text)}}return t}function j(e,n,t,s){return D.apply(this,arguments)}function D(){return(D=(0,a.Z)(function*(e,n,t,s){const r=new I(n,C.STREAM_GENERATE_CONTENT,e,!0);return function ne(e){const t=function oe(e){const n=e.getReader();return new ReadableStream({start(s){let r="";return function o(){return n.read().then(({value:u,done:d})=>{if(d)return r.trim()?void s.error(new f("Failed to parse stream")):void s.close();r+=u;let _,i=r.match(k);for(;i;){try{_=JSON.parse(i[1])}catch{return void s.error(new f(`Error parsing JSON response: "${i[1]}"`))}s.enqueue(_),r=r.substring(i[0].length),i=r.match(k)}return o()})}()}})}(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[s,r]=t.tee();return{stream:re(s),response:se(r)}}(yield y(r,JSON.stringify(t),s))})).apply(this,arguments)}function Z(e,n,t,s){return K.apply(this,arguments)}function K(){return(K=(0,a.Z)(function*(e,n,t,s){const r=new I(n,C.GENERATE_CONTENT,e,!1);return{response:G(yield(yield y(r,JSON.stringify(t),s)).json())}})).apply(this,arguments)}function N(e,n){let t=[];if("string"==typeof e)t=[{text:e}];else for(const s of e)t.push("string"==typeof s?{text:s}:s);return{role:n,parts:t}}function H(e){return e.contents?e:{contents:[N(e,"user")]}}const q="SILENT_ERROR";class ce{constructor(n,t,s,r){this.model=t,this.params=s,this.requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=n,s?.history&&(this._history=s.history.map(o=>{if(!o.role)throw new Error("Missing role for history item: "+JSON.stringify(o));return N(o.parts,o.role)}))}getHistory(){var n=this;return(0,a.Z)(function*(){return yield n._sendPromise,n._history})()}sendMessage(n){var t=this;return(0,a.Z)(function*(){var s,r;yield t._sendPromise;const o=N(n,"user"),u={safetySettings:null===(s=t.params)||void 0===s?void 0:s.safetySettings,generationConfig:null===(r=t.params)||void 0===r?void 0:r.generationConfig,contents:[...t._history,o]};let d;return t._sendPromise=t._sendPromise.then(()=>Z(t._apiKey,t.model,u,t.requestOptions)).then(i=>{var _;if(i.response.candidates&&i.response.candidates.length>0){t._history.push(o);const p=Object.assign({parts:[],role:"model"},null===(_=i.response.candidates)||void 0===_?void 0:_[0].content);t._history.push(p)}else{const p=M(i.response);p&&console.warn(`sendMessage() was unsuccessful. ${p}. Inspect response object for details.`)}d=i}),yield t._sendPromise,d})()}sendMessageStream(n){var t=this;return(0,a.Z)(function*(){var s,r;yield t._sendPromise;const o=N(n,"user"),u={safetySettings:null===(s=t.params)||void 0===s?void 0:s.safetySettings,generationConfig:null===(r=t.params)||void 0===r?void 0:r.generationConfig,contents:[...t._history,o]},d=j(t._apiKey,t.model,u,t.requestOptions);return t._sendPromise=t._sendPromise.then(()=>d).catch(i=>{throw new Error(q)}).then(i=>i.response).then(i=>{if(i.candidates&&i.candidates.length>0){t._history.push(o);const _=Object.assign({},i.candidates[0].content);_.role||(_.role="model"),t._history.push(_)}else{const _=M(i);_&&console.warn(`sendMessageStream() was unsuccessful. ${_}. Inspect response object for details.`)}}).catch(i=>{i.message!==q&&console.error(i)}),d})()}}function U(){return(U=(0,a.Z)(function*(e,n,t,s){const r=new I(n,C.COUNT_TOKENS,e,!1);return(yield y(r,JSON.stringify(Object.assign(Object.assign({},t),{model:n})),s)).json()})).apply(this,arguments)}function F(){return(F=(0,a.Z)(function*(e,n,t,s){const r=new I(n,C.EMBED_CONTENT,e,!1);return(yield y(r,JSON.stringify(t),s)).json()})).apply(this,arguments)}function Y(){return(Y=(0,a.Z)(function*(e,n,t,s){const r=new I(n,C.BATCH_EMBED_CONTENTS,e,!1),o=t.requests.map(d=>Object.assign(Object.assign({},d),{model:n}));return(yield y(r,JSON.stringify({requests:o}),s)).json()})).apply(this,arguments)}class fe{constructor(n,t,s){this.apiKey=n,this.model=t.model.includes("/")?t.model:`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.requestOptions=s||{}}generateContent(n){var t=this;return(0,a.Z)(function*(){const s=H(n);return Z(t.apiKey,t.model,Object.assign({generationConfig:t.generationConfig,safetySettings:t.safetySettings},s),t.requestOptions)})()}generateContentStream(n){var t=this;return(0,a.Z)(function*(){const s=H(n);return j(t.apiKey,t.model,Object.assign({generationConfig:t.generationConfig,safetySettings:t.safetySettings},s),t.requestOptions)})()}startChat(n){return new ce(this.apiKey,this.model,n,this.requestOptions)}countTokens(n){var t=this;return(0,a.Z)(function*(){const s=H(n);return function ue(e,n,t,s){return U.apply(this,arguments)}(t.apiKey,t.model,s)})()}embedContent(n){var t=this;return(0,a.Z)(function*(){const s=function ae(e){return"string"==typeof e||Array.isArray(e)?{content:N(e,"user")}:e}(n);return function de(e,n,t,s){return F.apply(this,arguments)}(t.apiKey,t.model,s)})()}batchEmbedContents(n){var t=this;return(0,a.Z)(function*(){return function _e(e,n,t,s){return Y.apply(this,arguments)}(t.apiKey,t.model,n,t.requestOptions)})()}}class le{constructor(n){this.apiKey=n}getGenerativeModel(n,t){if(!n.model)throw new f("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new fe(this.apiKey,n,t)}}},5861:(V,b,v)=>{function a(S,R,A,l,m,f,E){try{var h=S[f](E),g=h.value}catch(x){return void A(x)}h.done?R(g):Promise.resolve(g).then(l,m)}function w(S){return function(){var R=this,A=arguments;return new Promise(function(l,m){var f=S.apply(R,A);function E(g){a(f,l,m,E,h,"next",g)}function h(g){a(f,l,m,E,h,"throw",g)}E(void 0)})}}v.d(b,{Z:()=>w})}}]);