"use strict";(self.webpackChunkinsuranceAI=self.webpackChunkinsuranceAI||[]).push([[778],{7778:(we,U,p)=>{p.r(U),p.d(U,{GoogleaiModule:()=>be});var O=p(6814);function F(e,s,t,n,r,i,c){try{var u=e[i](c),a=u.value}catch(d){return void t(d)}u.done?s(a):Promise.resolve(a).then(n,r)}function l(e){return function(){var s=this,t=arguments;return new Promise(function(n,r){var i=e.apply(s,t);function c(a){F(i,n,r,c,u,"next",a)}function u(a){F(i,n,r,c,u,"throw",a)}c(void 0)})}}var I=function(e){return e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.OTHER="OTHER",e}(I||{});class E extends Error{constructor(s){super(`[GoogleGenerativeAI Error]: ${s}`)}}class H extends E{constructor(s,t){super(s),this.response=t}}const ee="0.2.1",te="genai-js";var m=function(e){return e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents",e}(m||{});class C{constructor(s,t,n,r){this.model=s,this.task=t,this.apiKey=n,this.stream=r}toString(){let s=`https://generativelanguage.googleapis.com/v1/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function y(e,s,t){return S.apply(this,arguments)}function S(){return(S=l(function*(e,s,t){let n;try{if(n=yield fetch(e.toString(),Object.assign(Object.assign({},function oe(e){const s={};if(e?.timeout>=0){const t=new AbortController,n=t.signal;setTimeout(()=>t.abort(),e.timeout),s.signal=n}return s}(t)),{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-client":`${te}/${ee}`,"x-goog-api-key":e.apiKey},body:s})),!n.ok){let r="";try{const i=yield n.json();r=i.error.message,i.error.details&&(r+=` ${JSON.stringify(i.error.details)}`)}catch{}throw new Error(`[${n.status} ${n.statusText}] ${r}`)}}catch(r){const i=new E(`Error fetching from ${e.toString()}: ${r.message}`);throw i.stack=r.stack,i}return n})).apply(this,arguments)}function R(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),K(e.candidates[0]))throw new H(`${x(e)}`,e);return function se(e){var s,t,n,r;return null!==(r=null===(n=null===(t=null===(s=e.candidates)||void 0===s?void 0:s[0].content)||void 0===t?void 0:t.parts)||void 0===n?void 0:n[0])&&void 0!==r&&r.text?e.candidates[0].content.parts[0].text:""}(e)}if(e.promptFeedback)throw new H(`Text not available. ${x(e)}`,e);return""},e}const re=[I.RECITATION,I.SAFETY];function K(e){return!!e.finishReason&&re.includes(e.finishReason)}function x(e){var s,t,n;let r="";if(e.candidates&&0!==e.candidates.length||!e.promptFeedback){if(null!==(n=e.candidates)&&void 0!==n&&n[0]){const i=e.candidates[0];K(i)&&(r+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(r+=`: ${i.finishMessage}`))}}else r+="Response was blocked",!(null===(s=e.promptFeedback)||void 0===s)&&s.blockReason&&(r+=` due to ${e.promptFeedback.blockReason}`),null!==(t=e.promptFeedback)&&void 0!==t&&t.blockReasonMessage&&(r+=`: ${e.promptFeedback.blockReasonMessage}`);return r}function T(e){return this instanceof T?(this.v=e,this):new T(e)}"function"==typeof SuppressedError&&SuppressedError;const D=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function ce(e){return N.apply(this,arguments)}function N(){return(N=l(function*(e){const s=[],t=e.getReader();for(;;){const{done:n,value:r}=yield t.read();if(n)return R(de(s));s.push(r)}})).apply(this,arguments)}function ue(e){return function ie(e,s,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=t.apply(e,s||[]),i=[];return r={},c("next"),c("throw"),c("return"),r[Symbol.asyncIterator]=function(){return this},r;function c(g){n[g]&&(r[g]=function(h){return new Promise(function(L,Me){i.push([g,h,L,Me])>1||u(g,h)})})}function u(g,h){try{!function a(g){g.value instanceof T?Promise.resolve(g.value.v).then(d,_):j(i[0][2],g)}(n[g](h))}catch(L){j(i[0][3],L)}}function d(g){u("next",g)}function _(g){u("throw",g)}function j(g,h){g(h),i.shift(),i.length&&u(i[0][0],i[0][1])}}(this,arguments,function*(){const t=e.getReader();for(;;){const{value:n,done:r}=yield T(t.read());if(r)break;yield yield T(R(n))}})}function de(e){const s=e[e.length-1],t={promptFeedback:s?.promptFeedback};for(const n of e)if(n.candidates)for(const r of n.candidates){const i=r.index;if(t.candidates||(t.candidates=[]),t.candidates[i]||(t.candidates[i]={index:r.index}),t.candidates[i].citationMetadata=r.citationMetadata,t.candidates[i].finishReason=r.finishReason,t.candidates[i].finishMessage=r.finishMessage,t.candidates[i].safetyRatings=r.safetyRatings,r.content&&r.content.parts){t.candidates[i].content||(t.candidates[i].content={role:r.content.role||"user",parts:[{text:""}]});for(const c of r.content.parts)c.text&&(t.candidates[i].content.parts[0].text+=c.text)}}return t}function Y(e,s,t,n){return v.apply(this,arguments)}function v(){return(v=l(function*(e,s,t,n){const r=new C(s,m.STREAM_GENERATE_CONTENT,e,!0);return function ae(e){const t=function le(e){const s=e.getReader();return new ReadableStream({start(n){let r="";return function i(){return s.read().then(({value:c,done:u})=>{if(u)return r.trim()?void n.error(new E("Failed to parse stream")):void n.close();r+=c;let d,a=r.match(D);for(;a;){try{d=JSON.parse(a[1])}catch{return void n.error(new E(`Error parsing JSON response: "${a[1]}"`))}n.enqueue(d),r=r.substring(a[0].length),a=r.match(D)}return i()})}()}})}(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[n,r]=t.tee();return{stream:ue(n),response:ce(r)}}(yield y(r,JSON.stringify(t),n))})).apply(this,arguments)}function B(e,s,t,n){return b.apply(this,arguments)}function b(){return(b=l(function*(e,s,t,n){const r=new C(s,m.GENERATE_CONTENT,e,!1);return{response:R(yield(yield y(r,JSON.stringify(t),n)).json())}})).apply(this,arguments)}function A(e,s){let t=[];if("string"==typeof e)t=[{text:e}];else for(const n of e)t.push("string"==typeof n?{text:n}:n);return{role:s,parts:t}}function M(e){return e.contents?e:{contents:[A(e,"user")]}}const k="SILENT_ERROR";class pe{constructor(s,t,n,r){this.model=t,this.params=n,this.requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=s,n?.history&&(this._history=n.history.map(i=>{if(!i.role)throw new Error("Missing role for history item: "+JSON.stringify(i));return A(i.parts,i.role)}))}getHistory(){var s=this;return l(function*(){return yield s._sendPromise,s._history})()}sendMessage(s){var t=this;return l(function*(){var n,r;yield t._sendPromise;const i=A(s,"user"),c={safetySettings:null===(n=t.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=t.params)||void 0===r?void 0:r.generationConfig,contents:[...t._history,i]};let u;return t._sendPromise=t._sendPromise.then(()=>B(t._apiKey,t.model,c,t.requestOptions)).then(a=>{var d;if(a.response.candidates&&a.response.candidates.length>0){t._history.push(i);const _=Object.assign({parts:[],role:"model"},null===(d=a.response.candidates)||void 0===d?void 0:d[0].content);t._history.push(_)}else{const _=x(a.response);_&&console.warn(`sendMessage() was unsuccessful. ${_}. Inspect response object for details.`)}u=a}),yield t._sendPromise,u})()}sendMessageStream(s){var t=this;return l(function*(){var n,r;yield t._sendPromise;const i=A(s,"user"),c={safetySettings:null===(n=t.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=t.params)||void 0===r?void 0:r.generationConfig,contents:[...t._history,i]},u=Y(t._apiKey,t.model,c,t.requestOptions);return t._sendPromise=t._sendPromise.then(()=>u).catch(a=>{throw new Error(k)}).then(a=>a.response).then(a=>{if(a.candidates&&a.candidates.length>0){t._history.push(i);const d=Object.assign({},a.candidates[0].content);d.role||(d.role="model"),t._history.push(d)}else{const d=x(a);d&&console.warn(`sendMessageStream() was unsuccessful. ${d}. Inspect response object for details.`)}}).catch(a=>{a.message!==k&&console.error(a)}),u})()}}function w(){return(w=l(function*(e,s,t,n){const r=new C(s,m.COUNT_TOKENS,e,!1);return(yield y(r,JSON.stringify(Object.assign(Object.assign({},t),{model:s})),n)).json()})).apply(this,arguments)}function G(){return(G=l(function*(e,s,t,n){const r=new C(s,m.EMBED_CONTENT,e,!1);return(yield y(r,JSON.stringify(t),n)).json()})).apply(this,arguments)}function P(){return(P=l(function*(e,s,t,n){const r=new C(s,m.BATCH_EMBED_CONTENTS,e,!1),i=t.requests.map(u=>Object.assign(Object.assign({},u),{model:s}));return(yield y(r,JSON.stringify({requests:i}),n)).json()})).apply(this,arguments)}class he{constructor(s,t,n){this.apiKey=s,this.model=t.model.includes("/")?t.model:`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.requestOptions=n||{}}generateContent(s){var t=this;return l(function*(){const n=M(s);return B(t.apiKey,t.model,Object.assign({generationConfig:t.generationConfig,safetySettings:t.safetySettings},n),t.requestOptions)})()}generateContentStream(s){var t=this;return l(function*(){const n=M(s);return Y(t.apiKey,t.model,Object.assign({generationConfig:t.generationConfig,safetySettings:t.safetySettings},n),t.requestOptions)})()}startChat(s){return new pe(this.apiKey,this.model,s,this.requestOptions)}countTokens(s){var t=this;return l(function*(){const n=M(s);return function fe(e,s,t,n){return w.apply(this,arguments)}(t.apiKey,t.model,n)})()}embedContent(s){var t=this;return l(function*(){const n=function ge(e){return"string"==typeof e||Array.isArray(e)?{content:A(e,"user")}:e}(s);return function _e(e,s,t,n){return G.apply(this,arguments)}(t.apiKey,t.model,n)})()}batchEmbedContents(s){var t=this;return l(function*(){return function me(e,s,t,n){return P.apply(this,arguments)}(t.apiKey,t.model,s,t.requestOptions)})()}}var o=p(9468),f=p(95),Z=p(594),Ce=p(6593);let ye=(()=>{class e{constructor(t){this.sanitize=t}transform(t){return this.sanitize.bypassSecurityTrustUrl(t)}static#e=this.\u0275fac=function(n){return new(n||e)(o.Y36(Ce.H7,16))};static#t=this.\u0275pipe=o.Yjl({name:"sanitizeUrl",type:e,pure:!0})}return e})();const Te=function(e){return{scanning:e}};function Ae(e,s){if(1&e&&(o.ynx(0),o._UZ(1,"br"),o.TgZ(2,"div",8),o._UZ(3,"img",9),o.ALo(4,"sanitizeUrl"),o.qZA(),o.BQk()),2&e){const t=s.$implicit,n=o.oxw();o.xp6(2),o.Q6J("ngClass",o.VKq(4,Te,n.submmited)),o.xp6(1),o.Q6J("src",o.lcZ(4,2,t),o.LSH)}}function Oe(e,s){if(1&e&&(o.ynx(0),o.TgZ(1,"div",10)(2,"div",11),o._UZ(3,"p",12),o.qZA()(),o.BQk()),2&e){const t=o.oxw();o.xp6(3),o.Q6J("innerText",t.content)}}function xe(e,s){if(1&e){const t=o.EpF();o.ynx(0),o.TgZ(1,"div",13)(2,"label",14)(3,"b"),o._uU(4,"Enter your message"),o.qZA()(),o.TgZ(5,"textarea",15),o.NdJ("ngModelChange",function(r){o.CHM(t);const i=o.oxw();return o.KtG(i.prompt=r)})("keyup.enter",function(){o.CHM(t);const r=o.oxw();return o.KtG(r.textInput())})("input",function(){o.CHM(t);const r=o.oxw();return o.KtG(r.clearContent())}),o.qZA()(),o.TgZ(6,"form",16)(7,"input",17,18),o.NdJ("change",function(r){o.CHM(t);const i=o.oxw();return o.KtG(i.onFileChanged(r))}),o.qZA(),o.TgZ(9,"div",19)(10,"div")(11,"button",20),o.NdJ("click",function(){o.CHM(t);const r=o.MAs(8);return o.KtG(r.click())}),o._uU(12,"Upload Picture"),o.qZA()(),o.TgZ(13,"div",21)(14,"button",22),o.NdJ("click",function(){o.CHM(t);const r=o.oxw();return o.KtG(r.ImageWithText())}),o._uU(15,"Get the Results"),o.qZA()()()(),o.BQk()}if(2&e){const t=o.oxw();o.xp6(5),o.Q6J("ngModel",t.prompt)}}function Ie(e,s){if(1&e){const t=o.EpF();o._UZ(0,"br"),o.TgZ(1,"button",23),o.NdJ("click",function(){o.CHM(t);const r=o.oxw();return o.KtG(r.reset())}),o._uU(2,"Reset"),o.qZA()}}function Se(e,s){1&e&&(o.TgZ(0,"div",25),o._UZ(1,"img",26),o.TgZ(2,"h4"),o._uU(3,"wait a second. searching for information..."),o.qZA()())}function Re(e,s){if(1&e&&o.YNc(0,Se,4,0,"div",24),2&e){const t=o.oxw();o.Q6J("ngIf",t.submmited&&0===t.uploadImages.length)}}const J=new class Ee{constructor(s){this.apiKey=s}getGenerativeModel(s,t){if(!s.model)throw new E("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new he(this.apiKey,s,t)}}("AIzaSyBEip1TZnfHNbMXlImJ1jr7ZV136BhcKII"),ve=[{path:"",component:(()=>{class e{constructor(){this.prompt="",this.content=null,this.submmited=!1,this.selectedFiles=[],this.uploadImages=[]}ngOnInit(){}clearContent(){this.content=null}textInput(){var t=this;return l(function*(){console.log("TEXT ONLY"),t.submmited=!0;const c=(yield(yield J.getGenerativeModel({model:"gemini-pro"}).generateContent(t.prompt)).response).text();console.log(c),t.content=c,t.prompt="",t.submmited=!1})()}onFileChanged(t){this.selectedFiles=t.target.files,this.selectedFiles&&Array.from(this.selectedFiles).length>0&&Array.from(this.selectedFiles).forEach(n=>{this.uploadImages.push(URL.createObjectURL(n))})}ImageWithText(){var t=this;return l(function*(){if(0===t.prompt.length)return void alert("Type your prompt");if(0===Array.from(t.selectedFiles).length)return void t.textInput();console.log("TEXT - IMAGE"),t.submmited=!0;const n=J.getGenerativeModel({model:"gemini-pro-vision"}),r=yield Promise.all(Array.from(t.selectedFiles).map(t.fileToGenerativePart)),u=(yield(yield n.generateContent([t.prompt,...r])).response).text();console.log(u),t.content=u,t.submmited=!1,t.prompt=""})()}fileToGenerativePart(t){return l(function*(){return{inlineData:{data:yield new Promise(r=>{const i=new FileReader;i.onloadend=()=>r(i.result.split(",")[1]),i.readAsDataURL(t)}),mimeType:t.type}}})()}reset(){this.prompt="",this.content=null,this.submmited=!1,this.uploadImages=[]}static#e=this.\u0275fac=function(n){return new(n||e)};static#t=this.\u0275cmp=o.Xpm({type:e,selectors:[["app-googleai"]],decls:16,vars:5,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],["routerLink","/"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["resetBtn",""],["loading",""],[1,"fingerprint",3,"ngClass"],[3,"src"],[1,"card"],[1,"card-body"],[1,"mt-4",3,"innerText"],[1,"form-group"],["for","exampleTextarea",1,"form-label","mt-4"],["id","exampleTextarea","rows","3","spellcheck","false","placeholder","text your input",1,"form-control",3,"ngModel","ngModelChange","keyup.enter","input"],[1,"my-5"],["type","file","name","images","multiple","multiple","accept","image/png, image/gif, image/jpeg",2,"display","none",3,"change"],["fileInput",""],[1,"text-center",2,"max-width","300px","margin","0 auto"],["type","button",1,"btn","btn-primary","w-100",3,"click"],[1,"mt-3"],["type","button",1,"btn","btn-success","w-100",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["class","loading",4,"ngIf"],[1,"loading"],["src","../../assets/dataloading.gif","alt","dataloading"]],template:function(n,r){if(1&n&&(o.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"div",2),o._UZ(4,"br"),o.TgZ(5,"button",3),o._uU(6,"Home"),o.qZA(),o._UZ(7,"br"),o.YNc(8,Ae,5,6,"ng-container",4),o._UZ(9,"br"),o.YNc(10,Oe,4,1,"ng-container",5),o.YNc(11,xe,16,1,"ng-container",5),o.YNc(12,Ie,3,0,"ng-template",null,6,o.W1O),o.YNc(14,Re,1,1,"ng-template",null,7,o.W1O),o.qZA()()()()),2&n){const i=o.MAs(13),c=o.MAs(15);o.xp6(8),o.Q6J("ngForOf",r.uploadImages),o.xp6(2),o.Q6J("ngIf",r.content)("ngIfElse",c),o.xp6(1),o.Q6J("ngIf",!r.content&&!r.submmited)("ngIfElse",i)}},dependencies:[O.mk,O.sg,O.O5,f._Y,f.Fj,f.JJ,f.JL,f.On,f.F,Z.rH,ye],styles:['.loading[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:300px}.fingerprint[_ngcontent-%COMP%]{position:relative;border:solid 3px #AAB8BE;width:100%;max-width:900px}.fingerprint[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:900px;max-height:600px;object-fit:contain;height:100%}.fingerprint.scanning[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;width:100%;max-width:900px;height:30px;background-image:linear-gradient(to bottom,rgba(170,184,190,0),rgba(0,150,136,.5));animation:_ngcontent-%COMP%_scanning 2.5s linear infinite alternate;z-index:9999}@keyframes _ngcontent-%COMP%_scanning{0%,to{height:18px}50%{height:calc(100% + -0px)}}']})}return e})()}];let be=(()=>{class e{static#e=this.\u0275fac=function(n){return new(n||e)};static#t=this.\u0275mod=o.oAB({type:e});static#n=this.\u0275inj=o.cJS({imports:[O.ez,f.u5,Z.Bz.forChild(ve)]})}return e})()}}]);